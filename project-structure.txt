# VIBIFY - Project Structure Outline

## ğŸ“ IMPORTANT NOTE
**This file is the living documentation of our project structure.**
- âœ… **Always update this file** when we add/remove/modify folders or files
- âœ… **Keep it current** with the actual project structure
- âœ… **Reference this file** when making architectural decisions
- âœ… **Use as roadmap** for Cursor AI development

## ğŸ—ï¸ MONOREPO ARCHITECTURE

```
vibify/
â”œâ”€â”€ ğŸ“ src/
â”‚   â”œâ”€â”€ ğŸ“ backend/                    # Python FastAPI Backend (UV managed)
â”‚   â”‚   â”œâ”€â”€ ğŸ“ app/
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ api/               # API endpoints
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ songs.py       # Song discovery, search, random
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ playlists.py   # Playlist CRUD operations
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ albums.py      # Album pages, add to playlist
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ upload.py      # Music upload endpoints âœ… CREATED
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ tags.py        # Genre filtering
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“„ auth.py        # Authentication
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ services/          # Business logic layer
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ song_service.py
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ playlist_service.py
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ upload_service.py âœ… CREATED
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ album_service.py
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“„ auth_service.py
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ models/            # Database models
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ song.py
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ playlist.py
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ upload.py
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“„ user.py
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ database/          # Database connection & config
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ connection.py
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ migrations/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“„ seed_data.py
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ utils/             # Utilities
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ b2_client.py   # Backblaze B2 integration
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ validators.py  # File validation âœ… CREATED
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“„ helpers.py     # Helper utilities âœ… CREATED
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ config/            # Configuration
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ settings.py    # Pydantic settings âœ… UPDATED
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ logging.py     # Centralized logging âœ… CREATED
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“„ env.py         # Environment utilities âœ… CREATED
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“„ main.py            # FastAPI app setup
â”‚   â”‚   â”œâ”€â”€ ğŸ“ scripts/               # Upload and utility scripts
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ upload_from_json.py    # JSON to Supabase upload âœ… CREATED
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ upload_complete.py     # Complete upload process âœ… CREATED
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ upload_to_supabase.py  # Legacy upload script âœ… MOVED
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ b2_upload/         # B2 upload utilities
â”‚   â”‚   â”‚       â””â”€â”€ ğŸ“„ upload_files_to_b2.py  # B2 file upload âœ… CREATED
â”‚   â”‚   â”œâ”€â”€ ğŸ“ tests/                 # Test suite
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ conftest.py        # Pytest configuration
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ app/               # Tests mirroring app structure
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ api/           # API tests
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ test_songs.py      # Songs API tests âœ… MOVED
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ test_upload.py     # Upload API tests
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ test_playlists.py  # Playlists tests
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“„ test_auth.py       # Authentication tests
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ services/      # Service tests
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ test_song_service.py
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ test_upload_service.py
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“„ test_playlist_service.py
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ utils/         # Utility tests
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ ğŸ“„ test_b2_client.py  # B2 client tests âœ… MOVED
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ ğŸ“„ test_validators.py
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ pyproject.toml         # UV project configuration
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ uv.lock               # UV lock file
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ .python-version       # Python version
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ requirements.txt      # Fallback requirements
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ Dockerfile
â”‚   â”‚   â””â”€â”€ ğŸ“„ .env.example
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ frontend/                   # Next.js 14 Frontend
â”‚   â”‚   â”œâ”€â”€ ğŸ“ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ app/               # Next.js App Router
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ layout.tsx     # Root layout
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ page.tsx       # Home page
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ (dashboard)/   # Dashboard routes
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ page.tsx   # Main dashboard
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ search/    # Search page
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“„ page.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ album/     # Album pages
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ [id]/
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚       â””â”€â”€ ğŸ“„ page.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ playlist/  # Playlist pages
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ [id]/
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚       â””â”€â”€ ğŸ“„ page.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ upload/    # Upload page
â”‚   â”‚   â”‚   â”‚   â”‚       â””â”€â”€ ğŸ“„ page.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ api/           # API routes (if needed)
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ components/        # React components
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ ui/            # shadcn/ui components
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ song/          # Song-related components
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ song-card.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ song-player.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ random-feed.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ song-search.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“„ genre-tabs.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ playlist/      # Playlist components
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ playlist-card.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ playlist-manager.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“„ add-to-playlist.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ album/         # Album components
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ album-page.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ album-card.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“„ add-album-to-playlist.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ upload/        # Upload components
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ music-upload.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ upload-progress.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“„ file-validator.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ layout/        # Layout components
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ header.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ sidebar.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“„ player-bar.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ common/        # Shared components
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ ğŸ“„ loading.tsx
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ ğŸ“„ error.tsx
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ ğŸ“„ pagination.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ lib/               # Utilities & config
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ api.ts         # API client
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ auth.ts        # Auth utilities
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ utils.ts       # Helper functions
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“„ constants.ts   # App constants
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ store/             # State management
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ song-store.ts  # Song state
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ playlist-store.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ player-store.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“„ auth-store.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ hooks/             # Custom React hooks
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ use-songs.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ use-playlists.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ use-player.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“„ use-upload.ts
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ types/             # TypeScript types
â”‚   â”‚   â”‚       â”œâ”€â”€ ğŸ“„ song.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ ğŸ“„ playlist.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ ğŸ“„ upload.ts
â”‚   â”‚   â”‚       â””â”€â”€ ğŸ“„ api.ts
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ package.json
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ next.config.js
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ tailwind.config.js
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ tsconfig.json
â”‚   â”‚   â””â”€â”€ ğŸ“„ .env.local.example
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“ shared/                     # Shared code between frontend/backend
â”‚       â”œâ”€â”€ ğŸ“ types/                 # Shared TypeScript types
â”‚       â”‚   â”œâ”€â”€ ğŸ“„ song.ts
â”‚       â”‚   â”œâ”€â”€ ğŸ“„ playlist.ts
â”‚       â”‚   â”œâ”€â”€ ğŸ“„ upload.ts
â”‚       â”‚   â””â”€â”€ ğŸ“„ api.ts
â”‚       â”œâ”€â”€ ğŸ“ constants/             # Shared constants
â”‚       â”‚   â”œâ”€â”€ ğŸ“„ api-endpoints.ts
â”‚       â”‚   â””â”€â”€ ğŸ“„ validation-rules.ts
â”‚       â””â”€â”€ ğŸ“ utils/                 # Shared utilities
â”‚           â”œâ”€â”€ ğŸ“„ formatters.ts
â”‚           â””â”€â”€ ğŸ“„ validators.ts
â”‚
â”œâ”€â”€ ğŸ“ docs/                          # Documentation
â”‚   â”œâ”€â”€ ğŸ“„ api.md
â”‚   â”œâ”€â”€ ğŸ“„ database-schema.md
â”‚   â””â”€â”€ ğŸ“„ deployment.md
â”‚
â”œâ”€â”€ ğŸ“ scripts/                       # Development scripts
â”‚   â”œâ”€â”€ ğŸ“„ setup.sh
â”‚   â”œâ”€â”€ ğŸ“„ dev.sh
â”‚   â”œâ”€â”€ ğŸ“„ build.sh
â”‚   â””â”€â”€ ğŸ“„ deploy.sh
â”‚
â”œâ”€â”€ ğŸ“„ .gitignore
â”œâ”€â”€ ğŸ“„ README.md
â”œâ”€â”€ ğŸ“„ features.txt                   # Feature documentation
â”œâ”€â”€ ğŸ“„ project-structure.txt          # This file
â”œâ”€â”€ ğŸ“„ docker-compose.yml             # Local development
â”œâ”€â”€ ğŸ“„ Procfile                       # Heroku deployment
â””â”€â”€ ğŸ“„ package.json                   # Root package.json for scripts
```

## ğŸ¯ KEY ARCHITECTURE DECISIONS

### **1. Monorepo Structure:**
- **`src/backend/`** - Python FastAPI (separate server)
- **`src/frontend/`** - Next.js 14 (separate server)
- **`src/shared/`** - Common types & utilities

### **2. Feature-Based Organization:**
- **Song components** â†’ `components/song/`
- **Playlist components** â†’ `components/playlist/`
- **Album components** â†’ `components/album/`
- **Upload components** â†’ `components/upload/`

### **3. Clear Separation:**
- **API layer** â†’ `backend/app/api/`
- **Business logic** â†’ `backend/app/services/`
- **Data models** â†’ `backend/app/models/`
- **UI components** â†’ `frontend/src/components/`

### **4. AI-Friendly Structure:**
- **Clear file names** (song-card.tsx, playlist-manager.tsx)
- **Logical grouping** (all song features in one folder)
- **Consistent patterns** (service â†’ component â†’ hook)

## ğŸš€ DEVELOPMENT WORKFLOW

### **Local Development:**
```bash
# Backend (Python)
cd src/backend
python -m uvicorn app.main:app --reload

# Frontend (Next.js)
cd src/frontend
npm run dev
```

### **Production:**
- **Backend** â†’ Heroku (Python + Gunicorn)
- **Frontend** â†’ Vercel/Netlify (Next.js)
- **Database** â†’ Supabase (PostgreSQL)
- **Storage** â†’ Backblaze B2 (Audio files)

## ğŸ“Š FEATURE MAPPING

### **Song Features:**
- **Discovery** â†’ `components/song/random-feed.tsx`
- **Search** â†’ `components/song/song-search.tsx`
- **Player** â†’ `components/song/song-player.tsx`
- **API** â†’ `backend/app/api/songs.py`

### **Playlist Features:**
- **Management** â†’ `components/playlist/playlist-manager.tsx`
- **Add Songs** â†’ `components/playlist/add-to-playlist.tsx`
- **API** â†’ `backend/app/api/playlists.py`

### **Album Features:**
- **Pages** â†’ `components/album/album-page.tsx`
- **Add to Playlist** â†’ `components/album/add-album-to-playlist.tsx`
- **API** â†’ `backend/app/api/albums.py`

### **Upload Features:**
- **Upload Form** â†’ `components/upload/music-upload.tsx`
- **Progress** â†’ `components/upload/upload-progress.tsx`
- **API** â†’ `backend/app/api/upload.py`

## ğŸ”§ TECHNICAL STACK

### **Backend:**
- **Python** + **FastAPI** for API
- **Supabase** for database & auth
- **B2 Backblaze** for audio storage
- **Gunicorn** for production server

### **Frontend:**
- **Next.js 14** + **TypeScript** + **React**
- **Tailwind CSS** + **shadcn/ui** for styling
- **Zustand** for state management
- **Howler.js** for audio playback

### **Database:**
- **PostgreSQL** (via Supabase)
- **Row Level Security** for user data
- **Full-text search** with GIN indexes
- **Optimized queries** for 10k+ songs

## ğŸ”„ MAINTENANCE WORKFLOW

### **When Making Changes:**
1. **Make the actual change** (add/remove/modify files)
2. **Update this file** (`project-structure.txt`) to reflect the change
3. **Keep it synchronized** with the real project structure
4. **Use as reference** for future development

### **Why This Matters:**
- **Cursor AI** uses this file to understand project structure
- **Team members** can quickly see the current architecture
- **Documentation** stays current with actual code
- **Consistency** across all development phases
